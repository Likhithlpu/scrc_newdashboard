server {
   listen       80;
   listen  [::]:80;
   underscores_in_headers on;

   # include /etc/nginx/sites-enabled/*;
   # access_log  /var/log/nginx/host.access.log  main;
   location /dashboard/static/ {
      autoindex on;
      alias /vol/www/static/;
   }

   location /media/ {
      autoindex on;
      alias /vol/www/media/;
   }

   location /log/ {
      add_header Content-Type text/plain;
      return 200 "upstream_http_TEST_HEADER: $sent_http_test_header, $upstream_http_test_header, $http_test_header";
   }

   location / {
      # rewrite ^/api/?(.*) /$1 break;
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Proto $scheme;
      # proxy_set_header SCRIPT_NAME /api;
      # proxy_set_header SCRIPT_NAME $upstream_http_SCRIPT_NAME;
      proxy_pass http://dashboard:8000;
   }
   #error_page  404              /404.html;
   # redirect server error pages to the static page /50x.html
   #
   error_page   500 502 503 504  /50x.html;
   location = /50x.html {
      root   /usr/share/nginx/html;
   }
}
